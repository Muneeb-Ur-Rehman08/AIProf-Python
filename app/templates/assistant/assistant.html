{% extends "base.html" %}
{% block content %}

<div class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 pt-16">
    <!-- <header class="fixed top-0 left-0 right-0 bg-white/80 backdrop-blur-sm shadow-sm z-10">
        <div class="max-w-7xl mx-auto px-4 py-2 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <span class="relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full">
                        <span class="flex h-full w-full items-center justify-center rounded-full bg-gray-100">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="black" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="lucide lucide-user">
                                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2">

                                </path>
                                <circle cx="12" cy="7" r="4">

                                </circle>
                            </svg>
                        </span>
                    </span>
                    <div>
                        <h2 class="text-lg font-semibold text-gray-900">React Hooks</h2>
                        <p class="text-sm text-gray-500">Computer Science â€¢ Web Development</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    {% if is_logged_in %}
                    <a href="{% url 'assistant_chat' assistant.id %}"
                        class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 h-10 px-4 py-2 bg-green-600 text-white hover:bg-green-700">
                        <svg
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-message-circle mr-2 h-4 w-4">
                            <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path>
                        </svg>
                        Chat
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </header> -->
    <div class="fixed top-0 left-0 right-0 bg-white/80 backdrop-blur-sm shadow-sm z-10">
        {% block navbar %}
        {% include 'modal/navbar.html' %}
        {% endblock %}
    </div>
    <div class="max-w-7xl mx-auto p-4">
        {% if assistant %}
        <div class="mb-8">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-900 tracking-tight">{{ assistant.name }}</h1>
                <div class="flex gap-2">
                    <a href="{% url 'list_assistants' %}"
                        class="inline-flex items-center justify-center gap-0.5 whitespace-nowrap rounded-md text-lg font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 h-10 px-4 py-2 text-indigo-600 hover:text-indigo-800 hover:bg-indigo-100">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-arrow-left mr-2 h-4 w-4">
                            <path d="m12 19-7-7 7-7"></path>
                            <path d="M19 12H5"></path>
                        </svg>Back
                    </a>
                    <div class="hidden md:flex gap-3">
                        {% if is_logged_in and is_creator %}
                        <a href="{% url 'assistant' assistant.id %}"
                            class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 h-10 px-4 py-2 bg-purple-600 text-white hover:bg-purple-700">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                class="lucide lucide-edit mr-2 h-4 w-4">
                                <path d="M12 20h9"></path>
                                <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4-1 1 4 9-16.5z"></path>
                            </svg>
                            Edit
                        </a>
                
                        {% endif %}
                        {% if is_logged_in %}
                        <a href="{% url 'assistant_chat' assistant.id %}"
                            class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 h-10 px-4 py-2 bg-green-600 text-white hover:bg-green-700">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                class="lucide lucide-message-circle mr-2 h-4 w-4">
                                <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path>
                            </svg>
                            Chat
                        </a>
                        {% endif %}
                    </div>

                    <div class="md:hidden fixed bottom-4 z-30 right-4 flex flex-col gap-3">
                        {% if is_logged_in and is_creator %}
                        <a href="{% url 'assistant' assistant.id %}"
                            class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-purple-600 hover:bg-purple-700 text-white w-12 h-12 rounded-full shadow-lg">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                class="lucide lucide-pen w-5 h-5">
                                <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path>
                            </svg>
                        </a>
                        {% endif %}
                        {% if is_logged_in %}
                        <a href="{% url 'assistant_chat' assistant.id %}"
                            class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-green-600 hover:bg-green-700 text-white w-12 h-12 rounded-full shadow-lg">
                    
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                class="lucide lucide-message-circle w-5 h-5">
                                <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z">
                                </path>
                            </svg>
                        </a>
                        {% endif %}
                    </div>
                </div>

            </div>
            <div class="flex justify-between md:justify-start gap-2 mb-4">
                <div>
                    <div class="inline-flex items-center rounded-full border font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent hover:bg-gray-200/60 text-sm bg-indigo-100 text-indigo-800 px-3 py-1"
                        data-v0-t="badge"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-book-open w-4 h-4 mr-1 inline">
                            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                        </svg>{{ assistant.subject }}</div>
                    <div class="inline-flex items-center rounded-full border font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent hover:bg-slate-200/60 text-sm bg-purple-100 text-purple-800 px-3 py-1"
                        data-v0-t="badge"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-code-xml w-4 h-4 mr-1 inline">
                            <path d="m18 16 4-4-4-4"></path>
                            <path d="m6 8-4 4 4 4"></path>
                            <path d="m14.5 4-5 16"></path>
                        </svg>{{ assistant.topic }}</div>
                </div>
            </div>
        </div>
        <div class="grid md:grid-cols-3 gap-8">
            <div class="md:col-span-2 space-y-8">
                <div class="relative">
                    <p id="short-desc" 
                       class="text-xl text-gray-600 max-w-4xl text-justify line-clamp-3"
                       _="on load
                         if my scrollHeight <= (parseInt(getComputedStyle(me).lineHeight) * 4)
                           remove .line-clamp-3 from me
                           hide #desc-toggle">
                        {{ assistant.description }}
                    </p>
                    <button _="on click 
                            toggle .line-clamp-3 on #short-desc
                            if my innerText is 'Read more' 
                                put 'Show less' into my innerText 
                            else 
                                put 'Read more' into my innerText"
                            id="desc-toggle" 
                            class="text-indigo-600 hover:text-indigo-800 text-sm font-medium">
                        Read more
                    </button>
                </div>
                <div class="relative rounded-xl overflow-hidden shadow-2xl bg-gray-900">
                    <div class="aspect-video bg-gray-800 flex items-center justify-center relative">
                        <div
                            class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent flex items-end p-8">
                            <div class="w-full">
                                <h3 class="text-2xl font-semibold text-white mb-2">Introduction to React Hooks</h3>
                                <p class="text-gray-300 text-lg max-w-3xl">Learn the basics of React Hooks and how they
                                    can simplify your components.</p>
                            </div>
                        </div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round"
                            class="lucide lucide-play h-20 w-20 text-white opacity-75 hover:opacity-100 transition-opacity cursor-pointer">
                            <polygon points="6 3 20 12 6 21 6 3"></polygon>
                        </svg>
                    </div><button
                        class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 h-9 rounded-md px-3 absolute top-4 right-4 bg-white text-indigo-600 hover:bg-indigo-50 shadow-lg hover:shadow-xl transition-all duration-300">Watch
                        Now</button><button
                        class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:text-accent-foreground h-10 w-10 absolute top-1/2 left-4 -translate-y-1/2 text-white hover:bg-white/20 transition-colors"><svg
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-chevron-left h-8 w-8">
                            <path d="m15 18-6-6 6-6"></path>
                        </svg></button><button
                        class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:text-accent-foreground h-10 w-10 absolute top-1/2 right-4 -translate-y-1/2 text-white hover:bg-white/20 transition-colors"><svg
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-chevron-right h-8 w-8">
                            <path d="m9 18 6-6-6-6"></path>
                        </svg></button>
                </div>
                <div class="flex justify-center gap-2">
                    <button
                        class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground w-3 h-3 p-0 rounded-full bg-indigo-600"></button><button
                        class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground w-3 h-3 p-0 rounded-full bg-gray-300"></button><button
                        class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground w-3 h-3 p-0 rounded-full bg-gray-300">
                    </button>
                </div>
                <div class="rounded-lg border bg-card text-card-foreground shadow-sm overflow-hidden transition-all hover:shadow-lg"
                    data-v0-t="card">
                    <div
                        class="p-6 flex items-center justify-between bg-white hover:bg-gradient-to-br hover:from-indigo-50 hover:to-purple-50 transition-all duration-300">
                        <div class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round"
                                class="lucide lucide-users-round h-8 w-8 text-indigo-500 mr-4">
                                <path d="M18 21a8 8 0 0 0-16 0"></path>
                                <circle cx="10" cy="8" r="5"></circle>
                                <path d="M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"></path>
                            </svg>
                            <div>
                                <p class="text-lg font-medium text-gray-900">Total Interactions</p>
                                <p class="text-sm text-gray-600">Engagement metric</p>
                            </div>
                        </div><span class="text-3xl font-bold text-indigo-600">{{assistant.interactions|default:0}}</span>
                    </div>
                </div>
                <div class="space-y-6">
                    <h3 class="text-2xl font-semibold text-gray-900">Reviews</h3>
                    
                    {% if reviews_by|length > 0 %}
                        {% for last_review in reviews_by %}
                        <div class="rounded-lg border bg-card text-card-foreground shadow-sm overflow-hidden transition-all hover:shadow-lg" data-v0-t="card">
                            <div class="p-6 bg-white hover:bg-gradient-to-br hover:from-indigo-50 hover:to-purple-50 transition-all duration-300">
                                <div class="flex items-center mb-4">
                                    {% for star in "12345"|make_list %}
                                    {% if star|add:"0" <= last_review.rating|add:"0" %}
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24"
                                        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round"
                                        class="lucide lucide-star h-5 w-5 text-yellow-400 mr-1">
                                        <polygon
                                            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                                        </polygon>
                                    </svg>
                                    {% else %}
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24"
                                        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round"
                                        class="lucide lucide-star h-5 w-5 text-gray-300 mr-1">
                                        <polygon
                                            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                                        </polygon>
                                    </svg>
                                    {% endif %}
                                    {% endfor %}
                                    <p class="text-gray-600 ml-2">{{last_review.rating}}</p>
                                </div>
                                <p class="text-gray-600 mb-4">{{last_review.review}}</p>
                                <p class="text-sm text-gray-500">- {{last_review.user.username}}, {{last_review.created_at|date:"F j, Y"}}</p>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="rounded-lg border bg-card text-card-foreground shadow-sm overflow-hidden transition-all hover:shadow-lg" data-v0-t="card">
                            <div class="p-6 bg-white text-center">
                                <p class="text-gray-600">No reviews yet. Be the first one to review!</p>
                            </div>
                        </div>
                    {% endif %}
              
                </div>
            </div>
            <div class="space-y-8">
                <div class="rounded-lg border bg-card text-card-foreground shadow-sm overflow-hidden transition-all hover:shadow-lg"
                    data-v0-t="card">
                    <div
                        class="p-6 flex flex-col items-center justify-center bg-white hover:bg-gradient-to-br hover:from-indigo-50 hover:to-purple-50 transition-all duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-star h-12 w-12 text-yellow-400 mb-2">
                            <polygon
                                points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                            </polygon>
                        </svg>
                        <span class="text-4xl font-bold text-gray-900 mb-1">{{assistant.average_rating}}</span><span
                            class="text-lg font-medium text-gray-600">Overall Rating</span>
                        <div class="flex items-center mt-2"><svg xmlns="http://www.w3.org/2000/svg" width="24"
                                height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round"
                                class="lucide lucide-message-square h-5 w-5 text-indigo-500 mr-2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                            </svg><span class="text-sm text-gray-600">Based on {{assistant.total_reviews}} reviews</span>
                        </div>
                    </div>
                </div>
                <div class="rounded-lg border bg-card text-card-foreground shadow-sm overflow-hidden transition-all hover:shadow-lg"
                    data-v0-t="card">
                    <div
                        class="p-6 bg-white hover:bg-gradient-to-br hover:from-indigo-50 hover:to-purple-50 transition-all duration-300">
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Rating Breakdown</h3>
                        <div class="flex items-center mb-2"><span class="text-sm text-gray-600 w-8">5 star</span>
                            <div class="flex-grow mx-2 bg-gray-200 rounded-full h-2">
                                <div class="bg-yellow-400 h-2 rounded-full" style="width: 100%;"></div>
                            </div><span class="text-sm text-gray-600 w-8 text-right">100%</span>
                        </div>
                        <div class="flex items-center mb-2"><span class="text-sm text-gray-600 w-8">4 star</span>
                            <div class="flex-grow mx-2 bg-gray-200 rounded-full h-2">
                                <div class="bg-yellow-400 h-2 rounded-full" style="width: 80%;"></div>
                            </div><span class="text-sm text-gray-600 w-8 text-right">80%</span>
                        </div>
                        <div class="flex items-center mb-2"><span class="text-sm text-gray-600 w-8">3 star</span>
                            <div class="flex-grow mx-2 bg-gray-200 rounded-full h-2">
                                <div class="bg-yellow-400 h-2 rounded-full" style="width: 60%;"></div>
                            </div><span class="text-sm text-gray-600 w-8 text-right">60%</span>
                        </div>
                        <div class="flex items-center mb-2"><span class="text-sm text-gray-600 w-8">2 star</span>
                            <div class="flex-grow mx-2 bg-gray-200 rounded-full h-2">
                                <div class="bg-yellow-400 h-2 rounded-full" style="width: 40%;"></div>
                            </div><span class="text-sm text-gray-600 w-8 text-right">40%</span>
                        </div>
                        <div class="flex items-center mb-2"><span class="text-sm text-gray-600 w-8">1 star</span>
                            <div class="flex-grow mx-2 bg-gray-200 rounded-full h-2">
                                <div class="bg-yellow-400 h-2 rounded-full" style="width: 20%;"></div>
                            </div><span class="text-sm text-gray-600 w-8 text-right">20%</span>
                        </div>
                    </div>
                </div>
                <!-- <div class="rounded-lg border bg-card text-card-foreground shadow-sm overflow-hidden transition-all hover:shadow-lg"
                    data-v0-t="card">
                    <div
                        class="p-6 bg-white hover:bg-gradient-to-br hover:from-indigo-50 hover:to-purple-50 transition-all duration-300">
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Course Information</h3>
                        <div class="space-y-3">
                            <div class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24"
                                    height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round"
                                    class="lucide lucide-book-open h-5 w-5 text-indigo-500 mr-2">
                                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                                </svg><span class="text-gray-600">10 Lessons</span></div>
                            <div class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24"
                                    height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round"
                                    class="lucide lucide-code-xml h-5 w-5 text-indigo-500 mr-2">
                                    <path d="m18 16 4-4-4-4"></path>
                                    <path d="m6 8-4 4 4 4"></path>
                                    <path d="m14.5 4-5 16"></path>
                                </svg><span class="text-gray-600">5 Coding Exercises</span></div>
                            <div class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24"
                                    height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round"
                                    class="lucide lucide-users-round h-5 w-5 text-indigo-500 mr-2">
                                    <path d="M18 21a8 8 0 0 0-16 0"></path>
                                    <circle cx="10" cy="8" r="5"></circle>
                                    <path d="M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"></path>
                                </svg><span class="text-gray-600">1,234 Students Enrolled</span></div>
                        </div>
                    </div>
                </div> -->
                

                <!-- Quiz Results Card -->
                {%if is_logged_in%}
                    <div 
                        class="rounded-lg border bg-card text-card-foreground shadow-sm cursor-pointer transition-all hover:shadow-lg" 
                        id="quiz-result-card" 
                        onclick="openModal()"
                    >
                    <div class="quiz-card p-4 shadow-lg rounded-lg bg-white text-center max-w-xs mx-auto">
                        <!-- Title -->
                        <h3 class="text-2xl font-semibold text-gray-900 mb-4">Quiz Results</h3>

                        <!-- Total Result Percentage -->
                        <div class="relative w-32 h-32 mx-auto mb-4">
                            <svg class="w-full h-full" viewBox="0 0 36 36">
                                <path
                                    class="text-gray-200"
                                    d="M18 2.0845
                                    a 15.9155 15.9155 0 0 1 0 31.831
                                    a 15.9155 15.9155 0 0 1 0 -31.831"
                                    fill="none"
                                    stroke-width="3"
                                    stroke="currentColor"
                                />
                                <path
                                    class="text-blue-500"
                                    d="M18 2.0845
                                    a 15.9155 15.9155 0 0 1 0 31.831
                                    a 15.9155 15.9155 0 0 1 0 -31.831"
                                    fill="none"
                                    stroke-width="3"
                                    stroke-dasharray="{{avg_score}}, 100"
                                    stroke-linecap="round"
                                    stroke="currentColor"
                                />
                            </svg>
                            <div class="absolute inset-0 flex flex-col items-center justify-center">
                                <span class="text-2xl font-bold text-blue-600">{{grade}}</span>
                                <span class="text-xs text-gray-500">Grade</span>
                            </div>
                        </div>

                        <!-- Knowledge Level -->
                        <p class="text-lg font-medium text-purple-600 mb-4">
                            {{knowledge_level}}
                        </p>

                        <!-- Button to View Detailed Results -->
                        <button 
                            class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-opacity-50"
                            >
                            View Detailed Results
                        </button>
                    </div>
                    </div>
                {%endif%}



            </div>
        </div>
    </div>
    {% endif %}
</div>

<!-- Modal Popup -->
<div id="quizModal" class="fixed z-50 inset-0 bg-gray-900 bg-opacity-50 hidden flex items-center justify-center">
    <div class="relative mx-auto p-6 w-96 shadow-xl rounded-lg bg-white">
        <!-- Close Button (X) -->
        <button id="close-modal" class="absolute top-2 right-2 text-gray-400 hover:text-gray-600" onclick="closeModal()">
            &times;
        </button>

        <!-- Report Card Header -->
        <div class="text-center mb-4">
            <h3 class="text-xl font-bold text-gray-800">Quiz Result Report</h3>
            <p class="text-sm text-gray-500">Your detailed quiz performance</p>
        </div>

        <!-- Overall Score -->
        <div class="relative w-32 h-32 mx-auto mb-4">
            <svg class="w-full h-full" viewBox="0 0 36 36">
                <path
                    class="text-gray-200"
                    d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                    fill="none"
                    stroke-width="3"
                    stroke="currentColor"
                />
                <path
                    class="text-blue-500"
                    d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                    fill="none"
                    stroke-width="3"
                    stroke-dasharray="{{avg_score}}, 100"
                    stroke-linecap="round"
                    stroke="currentColor"
                />
            </svg>
            <div class="absolute inset-0 flex flex-col items-center justify-center">
                <span class="text-2xl font-bold text-blue-600">{{avg_score}}%</span>
                <span class="text-xs text-gray-500">Overall Score</span>
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="grid grid-cols-2 gap-4 mb-4">
            <div class="bg-gray-50 p-3 rounded">
                <p class="text-sm text-gray-600">Total Questions:</p>
                <p class="text-lg font-bold text-gray-800">{{ total_questions }}</p>
            </div>
            <div class="bg-gray-50 p-3 rounded">
                <p class="text-sm text-gray-600">Completion Status:</p>
                <p class="text-lg font-bold text-blue-600">{{ completion_status }}</p>
            </div>
            <div class="bg-gray-50 p-3 rounded">
                <p class="text-sm text-gray-600">Correct Answers:</p>
                <p class="text-lg font-bold text-green-500">{{ total_correct }}</p>
            </div>
            <div class="bg-gray-50 p-3 rounded">
                <p class="text-sm text-gray-600">Wrong Answers:</p>
                <p class="text-lg font-bold text-red-500">{{ total_wrong }}</p>
            </div>
        </div>

        <!-- Knowledge Level -->
        <div class="mb-6">
            <p class="text-sm text-gray-600 mb-1">Knowledge Level:</p>
            <div class="relative w-full bg-gray-200 rounded h-2 mb-1">
                <div class="h-full bg-purple-500 rounded" style="width: 25%;"></div>
            </div>
            <div class="flex justify-between text-xs text-gray-500">
                <span>Beginner</span>
                <span>Intermediate</span>
                <span>Advanced</span>
                <span>Expert</span>
            </div>
        </div>

        <!-- Recommendations -->
        <div class="mb-6">
            <p class="text-sm font-medium text-gray-700 mb-2">Recommendations:</p>
            <div class="space-y-2">
                <label class="flex items-center">
                    <input type="checkbox" class="form-checkbox text-blue-500" checked onclick="return false;">
                    <span class="ml-2 text-sm text-gray-600">Focus on reviewing incorrect answers</span>
                </label>
                <label class="flex items-center">
                    <input type="checkbox" class="form-checkbox text-blue-500" checked onclick="return false;">
                    <span class="ml-2 text-sm text-gray-600">Complete additional practice exercises</span>
                </label>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="grid grid-cols-2 gap-4">
            <!-- <button class="py-2 bg-blue-500 text-white font-medium rounded text-sm hover:bg-blue-600">Review Answers</button> -->
            <button class="py-2 bg-gray-200 text-gray-800 font-medium rounded text-sm hover:bg-gray-300" onclick="closeModal()">Close</button>
        </div>
    </div>
</div>

<script>
    // Function to open the modal
    function openModal() {
        document.getElementById('quizModal').classList.remove('hidden');
    }

    // Function to close the modal
    function closeModal() {
        document.getElementById('quizModal').classList.add('hidden');
    }

    // Optionally close the modal by clicking outside of it
    window.onclick = function(event) {
        var modal = document.getElementById('quizModal');
        if (event.target == modal) {
            closeModal();
        }
    }
    
    // Set knowledge level bar width based on level
    document.addEventListener('DOMContentLoaded', function() {
        const knowledgeLevel = "{{knowledge_level}}";
        const knowledgeBar = document.querySelector('.bg-purple-500');
        
        if (knowledgeBar) {
            if (knowledgeLevel === "Beginner") {
                knowledgeBar.style.width = "25%";
            } else if (knowledgeLevel === "Intermediate") {
                knowledgeBar.style.width = "50%";
            } else if (knowledgeLevel === "Advanced") {
                knowledgeBar.style.width = "75%";
            } else if (knowledgeLevel === "Expert") {
                knowledgeBar.style.width = "100%";
            }
        }
    });
</script>


{% endblock %}



<form class="space-y-4 p-4 bg-gradient-to-b from-purple-900 to-indigo-900 text-white rounded-lg shadow-md" id="filter-form">
  <!-- Accordion Item for Subjects -->
  <div class="collapse collapse-arrow border border-gray-600 rounded-md shadow-lg">
    <h2
      class="collapse-title bg-purple-700 text-white font-semibold shadow-lg cursor-pointer"
      _="on click toggle .open on #subject-section
          then toggle .open on #topic-section"
    >
      Subjects
    </h2>
    <div id="subject-section" class="collapse-content bg-purple-800 text-white p-4 open">
      <!-- Search Input -->
      <div class="relative">
        <svg xmlns="http://www.w3.org/2000/svg" class="absolute left-3 top-3 h-5 w-5 text-gray-400" viewBox="0 0 16 16" fill="currentColor">
          <path fill-rule="evenodd" d="M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z" clip-rule="evenodd" />
        </svg>
        <input
          type="text"
          placeholder="Search subjects..."
          class="input input-bordered w-full bg-purple-700 text-white pl-10 focus:outline-none focus:ring-2 focus:ring-indigo-500"
          id="subject-search"
          hx-trigger="keyup changed delay:300ms"
          onkeyup="filterSubjects()"
        />
      </div>
      <!-- Subject List -->
      <div class="space-y-2 max-h-40 overflow-y-auto scrollbar-thin scrollbar-thumb-purple-600 scrollbar-track-purple-800 mt-4" id="subject-list">
        {% for subject in subjects_data %}
        <div
          class="flex items-center space-x-3 subject-item cursor-pointer"
          onclick="document.getElementById('subject-{{ subject.name }}').click();"
        >
          <input
            type="checkbox"
            id="subject-{{ subject.name }}"
            class="checkbox checkbox-primary"
            name="subject"
            value="{{ subject.name }}"
            hx-trigger="change"
            hx-get="{% url 'list_assistants' %}"
            hx-target="#assistants-list"
            hx-include="[name='subject']:checked,[name='topic']:checked,[name='keyword']"
          />
          <label for="subject-{{ subject.name }}" class="text-sm font-medium cursor-pointer">
            {{ subject.name }}
          </label>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Accordion Item for Topics -->
  <div class="collapse collapse-arrow border border-gray-600 rounded-md shadow-lg">
    <h2
      class="collapse-title bg-purple-700 text-white font-semibold shadow-lg cursor-pointer"
      _="on click toggle .open on #topic-section
          then toggle .open on #subject-section"
    >
      Topics
    </h2>
    <div id="topic-section" class="collapse-content bg-purple-800 text-white p-4">
      <!-- Search Input -->
      <div class="relative">
        <svg xmlns="http://www.w3.org/2000/svg" class="absolute left-3 top-3 h-5 w-5 text-gray-400" viewBox="0 0 16 16" fill="currentColor">
          <path fill-rule="evenodd" d="M9.965 11.026a5 5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z" clip-rule="evenodd" />
        </svg>
        <input
          type="text"
          placeholder="Search topics..."
          class="input input-bordered w-full bg-purple-700 text-white pl-10 focus:outline-none focus:ring-2 focus:ring-indigo-500"
          id="topic-search"
          hx-trigger="keyup changed delay:300ms"
          onkeyup="filterTopics()"
        />
      </div>
      <!-- Topic List -->
      <div class="space-y-2 max-h-40 overflow-y-auto scrollbar-thin scrollbar-thumb-purple-600 scrollbar-track-purple-800 mt-4" id="topic-list">
        {% for topic in subjects_data %}
        {% for topic in topic.topics %}
        <div
          class="flex items-center space-x-3 topic-item cursor-pointer"
          onclick="document.getElementById('topic-{{ topic }}').click();"
        >
          <input
            type="checkbox"
            id="topic-{{ topic }}"
            class="checkbox checkbox-primary"
            name="topic"
            value="{{ topic }}"
            hx-trigger="change"
            hx-get="{% url 'list_assistants' %}"
            hx-target="#assistants-list"
            hx-include="[name='topic']:checked,[name='subject']:checked,[name='keyword']"
          />
          <label for="topic-{{ topic }}" class="text-sm font-medium cursor-pointer">
            {{ topic }}
          </label>
        </div>
        {% endfor %}
        {% endfor %}
      </div>
    </div>
  </div>
</form>
